nextflow_pipeline {

    name "Test nf-core-utils config validation functions"
    script "../config-validation/main.nf"
    config "../config-validation/nextflow.config"

    test("monochrome_logs params enabled") {

        when {
            params {
                monochrome_logs = true
            }
        }

        then {
            assert workflow.success

            // Should complete successfully (the detailed logs are not captured in workflow.stdout by nf-test)
            assert workflow.stdout.any { it.contains("Pipeline is starting") }
            assert workflow.stdout.any { it.contains("Pipeline complete") }

            // Snapshot basic successful execution
        }
    }

    test("monochrome_logs params disabled") {

        when {
            params {
                monochrome_logs = false
            }
        }

        then {
            assert workflow.success

            // Should complete successfully
            assert workflow.stdout.any { it.contains("Pipeline is starting") }
            assert workflow.stdout.any { it.contains("Pipeline complete") }

            // Snapshot integration scenario success
        }
    }
}
